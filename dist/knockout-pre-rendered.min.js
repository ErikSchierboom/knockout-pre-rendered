!function(e,t){"function"==typeof define&&define.amd?define(["knockout"],t):"object"==typeof exports?module.exports=t(require("knockout")):e.KnockoutElse=t(e.ko)}(this,function(p){"use strict";function v(e){return!!e&&"object"==typeof e&&e.constructor===Object}var t=window.document&&"\x3c!--test--\x3e"===window.document.createComment("test").text,n=t?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/;function m(e){return 8==e.nodeType&&n.test(t?e.text:e.nodeValue)}function i(e){return e&&e.nodeType&&1===e.nodeType}function h(e,t){return"string"==typeof e?i(t)&&t.attributes&&t.attributes[e]:i(t)}function u(e,t,n,i){var s,r=document.createElement("div");if(e.content)s=e.content;else if("SCRIPT"===e.tagName)if(e.innerHTML.match(/<tr[\s\S]*?<\/tr>/g)){var a=document.createElement("div"),o="<table><tbody>"+e.innerHTML+"</tbody></table>";a.innerHTML=o,s=a.firstChild.tBodies[0]}else(s=document.createElement("div")).innerHTML=e.innerHTML;else s=e;for(var l=0,u=function(e,t){return p.utils.arrayFirst(p.virtualElements.childNodes(e),h.bind(this,t))}(s,t?null:"data-template");l<i;l++){var d=u;for(r.insertBefore(u.cloneNode(!0),null);(u=u.nextElementSibling||u.nextSibling)&&1!==u.nodeType;);n&&p.removeNode(d)}return r}function d(e,t){return{status:"existing",value:e,index:t}}function e(e,r,a,o){var l=p.bindingHandlers[e].preprocess;p.bindingHandlers[e].preprocess=function(e,t,n){l&&(e=l(e,t,n));var i=p.expressionRewriting.parseObjectLiteral(e);o&&(i=p.utils.arrayMap(i,o));var s=[];return p.utils.arrayForEach(i,function(e){if(null!=e){var t=function(e){if(-1==p.utils.arrayIndexOf(c,e)){var t=e.match(f);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}return!1}("unknown"in e?e.unknown:e.value);t&&s.push("'"+("unknown"in e?a:e.key)+"':function(_v){"+t+"=_v}")}}),0!=s.length&&n(r,"{"+s.join(",")+"}"),e||!0}}p.utils.extend(p.expressionRewriting._twoWayBindings,{text:!0,html:!0,visible:!0,enable:!0,disable:!0}),e("attr","_ko_prerender_attrPropertyWriters","attr");var c=["true","false","null","undefined"],f=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;function a(e,i,t,n,s){var r=this;this.element=e,this.container=m(e)?this.element.parentNode:e,this.$context=s;var a=!1,o=i();v(o)||(o={data:(a=p.unwrap(s.$rawData)===o)?s.$rawData:o,createElement:o.createElement}),this.data=o.data,this.as=o.as,this.createElement=o.createElement,this.noContext=o.noContext,this.namedTemplate=void 0!==o.name,this.nodesPerElement=o.nodesPerElement||1,this.templateNode=u(o.name?document.getElementById(o.name):e,this.namedTemplate,!o.name,this.nodesPerElement),this.afterQueueFlush=o.afterQueueFlush,this.beforeQueueFlush=o.beforeQueueFlush,this.dataChanged=o.dataChanged,this.changeQueue=[],this.lastNodesList=[],this.childContexts=[],this.indexesToDelete=[],this.rendering_queued=!1,this.existingElements=function(e,t){return p.utils.arrayFilter(p.virtualElements.childNodes(e),h.bind(this,t))}(this.namedTemplate?this.element:this.container,this.namedTemplate?null:"data-init"),"function"==typeof this.createElement&&this.createElements();var l=p.unwrap(this.data);this.onArrayChange(p.utils.arrayMap(l,d)),p.isObservable(this.data)?(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeSubs=this.data.subscribe(this.onArrayChange,this,"arrayChange")):this.changeSubs=p.computed(function(){var e=a?s.$rawData:i(),t=p.unwrap(v(e)?e.data:e);if(null!=this.previousContents){var n=p.utils.compareArrays(this.previousContents,t,{sparse:!0});0!=n.length&&r.onArrayChange(n)}this.previousContents=[].concat(t)},{previousContents:null})}a.animateFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},a.prototype.dispose=function(){this.changeSubs&&this.changeSubs.dispose()},a.prototype.onArrayChange=function(e){var t=this,n={added:[],existing:[],deleted:[]};p.utils.arrayForEach(e,function(e){n[e.status].push(e)}),"function"==typeof this.dataChanged&&this.dataChanged(n),0<n.deleted.length&&(this.changeQueue.push.apply(this.changeQueue,n.deleted),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,n.existing),this.changeQueue.push.apply(this.changeQueue,n.added),0<this.changeQueue.length&&!this.rendering_queued&&(this.rendering_queued=!0,a.animateFrame.call(window,function(){t.processQueue()}))},a.prototype.processQueue=function(){var t=this;"function"==typeof this.beforeQueueFlush&&this.beforeQueueFlush(this.changeQueue),p.utils.arrayForEach(this.changeQueue,function(e){t[e.status](e.index,e.value)}),this.rendering_queued=!1,"function"==typeof this.afterQueueFlush&&this.afterQueueFlush(this.changeQueue),this.changeQueue=[]},a.prototype.createChildContext=function(t,e){return this.noContext?this.$context.extend({$item:e}):this.$context.createChildContext(e,this.as||null,function(e){e.$index=p.observable(t)})},a.prototype.existing=function(e,t){for(var n,i=this.childContexts[e]=this.createChildContext(e,t),s=e*this.nodesPerElement,r=0;r<this.nodesPerElement;r++)n=this.existingElements[s+r],p.applyBindings(i,n);this.lastNodesList.splice(e,0,n)},a.prototype.added=function(e,t){var n=this.lastNodesList[e-1]||null,i=this.templateNode.cloneNode(!0),s=p.virtualElements.childNodes(i);this.lastNodesList.splice(e,0,s[s.length-1]),this.childContexts[e]=this.createChildContext(e,t),p.applyBindingsToDescendants(this.childContexts[e],i);for(var r=s.length-1;0<=r;--r){var a=s[r];if(!a)return;p.virtualElements.insertAfter(this.element,a,n)}},a.prototype.deleted=function(e,t){for(var n=this.lastNodesList[e],i=this.lastNodesList[e-1]||this.element;n=n.previousSibling,p.removeNode(n&&n.nextSibling||p.virtualElements.firstChild(this.element)),n&&n!==i;);this.lastNodesList[e]=this.lastNodesList[e-1],this.indexesToDelete.push(e)},a.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;0<=e;--e)this.lastNodesList.splice(this.indexesToDelete[e],1),this.childContexts.splice(this.indexesToDelete[e],1);for(var t=this.childContexts.length-1;0<=t;--t)this.childContexts[t]&&this.childContexts[t].$index&&this.childContexts[t].$index(t);this.indexesToDelete=[]},a.prototype.createElements=function(){for(var t=this,e=[],n=0;n<this.existingElements.length/this.nodesPerElement;n++)e.push(this.createElement());p.isObservable(this.data)?this.data(e):p.utils.arrayForEach(e,function(e){t.data.push(e)})},p.bindingHandlers.foreachInit={init:function(e,t,n,i,s){var r=new a(e,t,n,i,s);return p.utils.domNodeDisposal.addDisposeCallback(e,function(){r.dispose()}),{controlsDescendantBindings:!0}},InitializedForeach:a},p.virtualElements.allowedBindings.foreachInit=!0,p.bindingHandlers.init={init:function(e,t,n,i){var s,r=t();v(s=r)&&void 0===s.value&&void 0===s.convert&&void 0===s.field?function(e,t,n){var i=n.get("_ko_prerender_initPropertyWriters");for(var s in e)if(e.hasOwnProperty(s)&&t[s]instanceof Function)t[s](e[s]);else if(i){var r=i[s];r&&r(e[s])}}(r,i,n):n.get("attr")?function(e,t,n){var i=m(e)?p.virtualElements.firstChild(e):e,s=n.get("attr");for(var r in s)if(s.hasOwnProperty(r)){if(void 0===i.attributes[r])continue;var a=i.attributes[r].value;if(v(t)&&"function"==typeof t.convert&&(a=t.convert(a)),p.isObservable(s[r]))s[r](a);else{var o=n.get("_ko_prerender_attrPropertyWriters");o&&o[r]&&o[r](a)}}}(e,r,n):function(e,t,n){var i,s=m(e)?p.virtualElements.firstChild(e):e,r=p.utils.peekObservable(t),a=v(t)&&void 0!==t.value?t.value:n.get("checked")?s.checked:n.get("visible")?!((i=s).offsetWidth<=0&&i.offsetHeight<=0||i.style&&i.style.display&&"none"==i.style.display):n.get("html")?s.innerHTML:n.get("enable")?!s.disabled:n.get("disable")?s.disabled:s.innerText||s.textContent||s.value;v(t)&&"function"==typeof t.convert&&(a=t.convert(a));var o=n.get("_ko_prerender_initPropertyWriters")||{},l=n.get("_ko_property_writers")||{},u=!t&&"field"in o?o.field:p.isObservable(t)?t:v(t)&&"field"in t?p.isObservable(t.field)?t.field:o.field:void 0;if(!u)for(var d=["text","textInput","value","checked","html","visible","enable","disable"],h=0;h<d.length&&!u;h++){var c=d[h],f=n.get(c);f&&p.isObservable(f)?u=f:c in l&&(u=l[c])}u&&u(a,r)}(e,r,n)}},e("init","_ko_prerender_initPropertyWriters","field",function(e){var t=e.key;return"convert"===t||"value"===t?null:void 0===t||"field"===t?e:{key:t,value:t}}),p.virtualElements.allowedBindings.init=!0});